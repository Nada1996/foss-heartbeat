{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/387", "repository_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams", "labels_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/387/labels{/name}", "comments_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/387/comments", "events_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/387/events", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/issues/387", "id": 138827009, "number": 387, "title": "DB migration is failing on fresh database setup", "user": {"login": "Nattivolk", "id": 1571562, "avatar_url": "https://avatars2.githubusercontent.com/u/1571562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nattivolk", "html_url": "https://github.com/Nattivolk", "followers_url": "https://api.github.com/users/Nattivolk/followers", "following_url": "https://api.github.com/users/Nattivolk/following{/other_user}", "gists_url": "https://api.github.com/users/Nattivolk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nattivolk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nattivolk/subscriptions", "organizations_url": "https://api.github.com/users/Nattivolk/orgs", "repos_url": "https://api.github.com/users/Nattivolk/repos", "events_url": "https://api.github.com/users/Nattivolk/events{/privacy}", "received_events_url": "https://api.github.com/users/Nattivolk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 43558654, "url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-03-06T19:34:11Z", "updated_at": "2016-03-16T19:33:22Z", "closed_at": "2016-03-16T19:33:22Z", "author_association": "MEMBER", "body_html": "<p>bundle exec rake db:drop db:create db:migrate is not working on fresh database setup.</p>\n<p>Reason is:</p>\n<ul>\n<li>20150625085615_add_seasons_to_mailings.rb is calling Mailing.update_all</li>\n<li>which calls Season.current</li>\n<li>which is depending on database column created in 20151205133354_add_project_proposal_dates_to_seasons.rb</li>\n</ul>\n<p>This is not failing on travisCI, because we don't call db:drop here.</p>\n<p>Workaround: Comment out line 4 in 20150625085615_add_seasons_to_mailings.rb -&gt; Mailing.update_all(seasons: [Season.current.name])</p>", "body_text": "bundle exec rake db:drop db:create db:migrate is not working on fresh database setup.\nReason is:\n\n20150625085615_add_seasons_to_mailings.rb is calling Mailing.update_all\nwhich calls Season.current\nwhich is depending on database column created in 20151205133354_add_project_proposal_dates_to_seasons.rb\n\nThis is not failing on travisCI, because we don't call db:drop here.\nWorkaround: Comment out line 4 in 20150625085615_add_seasons_to_mailings.rb -> Mailing.update_all(seasons: [Season.current.name])", "body": "bundle exec rake db:drop db:create db:migrate is not working on fresh database setup.\n\nReason is: \n- 20150625085615_add_seasons_to_mailings.rb is calling Mailing.update_all \n- which calls Season.current \n- which is depending on database column created in 20151205133354_add_project_proposal_dates_to_seasons.rb\n\nThis is not failing on travisCI, because we don't call db:drop here.\n\nWorkaround: Comment out line 4 in 20150625085615_add_seasons_to_mailings.rb -> Mailing.update_all(seasons: [Season.current.name])\n"}