{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/comments/231521209", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/issues/491#issuecomment-231521209", "issue_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/491", "id": 231521209, "user": {"login": "carpodaster", "id": 164400, "avatar_url": "https://avatars2.githubusercontent.com/u/164400?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carpodaster", "html_url": "https://github.com/carpodaster", "followers_url": "https://api.github.com/users/carpodaster/followers", "following_url": "https://api.github.com/users/carpodaster/following{/other_user}", "gists_url": "https://api.github.com/users/carpodaster/gists{/gist_id}", "starred_url": "https://api.github.com/users/carpodaster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carpodaster/subscriptions", "organizations_url": "https://api.github.com/users/carpodaster/orgs", "repos_url": "https://api.github.com/users/carpodaster/repos", "events_url": "https://api.github.com/users/carpodaster/events{/privacy}", "received_events_url": "https://api.github.com/users/carpodaster/received_events", "type": "User", "site_admin": false}, "created_at": "2016-07-09T07:38:08Z", "updated_at": "2016-07-09T07:38:08Z", "author_association": "OWNER", "body_html": "<p><a href=\"https://github.com/f3pix\" class=\"user-mention\">@F3PiX</a> I'm not sure if I can reproduce it correctly. I can confirm that immediately after the current season is destroyed and we are routed back to orga/seasons#index, the 2016 season is gone. However, the first call to <code>current_season</code> anywhere will automatically re-created it.</p>\n<p>I've tried the following change locally but can you apply it on your end and see if it fixes things? Thanks! <g-emoji class=\"g-emoji\" alias=\"smile\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f604.png\">\ud83d\ude04</g-emoji></p>\n<div class=\"highlight highlight-source-diff\"><pre>index c644440..67823f1 100644\n<span class=\"pl-md\">--- a/app/controllers/orga/seasons_controller.rb</span>\n<span class=\"pl-mi1\">+++ b/app/controllers/orga/seasons_controller.rb</span>\n<span class=\"pl-mdr\">@@ -58,6 +58,7 @@</span> class Orga::SeasonsController &lt; Orga::BaseController\n         @season.fake_coding_phase\n       when 'RealTime'\n         @season.destroy\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        Season.current # ensures a current Season is created right away</span>\n       end\n     redirect_to orga_seasons_path, notice: \"We time travelled into the #{params[:option]} phase\"\n   end</pre></div>", "body_text": "@F3PiX I'm not sure if I can reproduce it correctly. I can confirm that immediately after the current season is destroyed and we are routed back to orga/seasons#index, the 2016 season is gone. However, the first call to current_season anywhere will automatically re-created it.\nI've tried the following change locally but can you apply it on your end and see if it fixes things? Thanks! \ud83d\ude04\nindex c644440..67823f1 100644\n--- a/app/controllers/orga/seasons_controller.rb\n+++ b/app/controllers/orga/seasons_controller.rb\n@@ -58,6 +58,7 @@ class Orga::SeasonsController < Orga::BaseController\n         @season.fake_coding_phase\n       when 'RealTime'\n         @season.destroy\n+        Season.current # ensures a current Season is created right away\n       end\n     redirect_to orga_seasons_path, notice: \"We time travelled into the #{params[:option]} phase\"\n   end", "body": "@F3PiX I'm not sure if I can reproduce it correctly. I can confirm that immediately after the current season is destroyed and we are routed back to orga/seasons#index, the 2016 season is gone. However, the first call to `current_season` anywhere will automatically re-created it.\n\nI've tried the following change locally but can you apply it on your end and see if it fixes things? Thanks! \ud83d\ude04 \n\n``` patch\nindex c644440..67823f1 100644\n--- a/app/controllers/orga/seasons_controller.rb\n+++ b/app/controllers/orga/seasons_controller.rb\n@@ -58,6 +58,7 @@ class Orga::SeasonsController < Orga::BaseController\n         @season.fake_coding_phase\n       when 'RealTime'\n         @season.destroy\n+        Season.current # ensures a current Season is created right away\n       end\n     redirect_to orga_seasons_path, notice: \"We time travelled into the #{params[:option]} phase\"\n   end\n```\n"}