{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/comments/240879541", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/528#issuecomment-240879541", "issue_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/528", "id": 240879541, "user": {"login": "michaelem", "id": 182228, "avatar_url": "https://avatars3.githubusercontent.com/u/182228?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelem", "html_url": "https://github.com/michaelem", "followers_url": "https://api.github.com/users/michaelem/followers", "following_url": "https://api.github.com/users/michaelem/following{/other_user}", "gists_url": "https://api.github.com/users/michaelem/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelem/subscriptions", "organizations_url": "https://api.github.com/users/michaelem/orgs", "repos_url": "https://api.github.com/users/michaelem/repos", "events_url": "https://api.github.com/users/michaelem/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelem/received_events", "type": "User", "site_admin": false}, "created_at": "2016-08-18T22:44:58Z", "updated_at": "2016-08-18T22:44:58Z", "author_association": "MEMBER", "body_html": "<p><a href=\"https://github.com/carpodaster\" class=\"user-mention\">@carpodaster</a> <a href=\"https://github.com/f3pix\" class=\"user-mention\">@F3PiX</a> PATH_PARENTS is intended to provide a way to prepend a namespace if one subclasses the comments controller (compare <a href=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/blob/master/app/controllers/rating/comments_controller.rb\">here</a>).</p>\n<p>The issue at hand is that we get to the comments controller which redirects back to the object that the comment was created on and that object is an Activity. Thus redirect_to redirects to the activity_path(activity). That we have differnt kinds of activity is nothing that rails knows about.</p>\n<p>So the current fix works because it creates an activity_path, but it would fall apart as soon as we have another commentable to which we want to redirect to within the root namespace.<br>\nAnother possible solution would be to subclass the comments controller and have something like a StatusUpdates::CommentsController? This Controller then could live under /status_updates/comments and always redirect to a status update.</p>\n<p>Kinda thinking out loud here, but does that sound reasonable?</p>", "body_text": "@carpodaster @F3PiX PATH_PARENTS is intended to provide a way to prepend a namespace if one subclasses the comments controller (compare here).\nThe issue at hand is that we get to the comments controller which redirects back to the object that the comment was created on and that object is an Activity. Thus redirect_to redirects to the activity_path(activity). That we have differnt kinds of activity is nothing that rails knows about.\nSo the current fix works because it creates an activity_path, but it would fall apart as soon as we have another commentable to which we want to redirect to within the root namespace.\nAnother possible solution would be to subclass the comments controller and have something like a StatusUpdates::CommentsController? This Controller then could live under /status_updates/comments and always redirect to a status update.\nKinda thinking out loud here, but does that sound reasonable?", "body": "@carpodaster @F3PiX PATH_PARENTS is intended to provide a way to prepend a namespace if one subclasses the comments controller (compare [here](https://github.com/rails-girls-summer-of-code/rgsoc-teams/blob/master/app/controllers/rating/comments_controller.rb)).\n\nThe issue at hand is that we get to the comments controller which redirects back to the object that the comment was created on and that object is an Activity. Thus redirect_to redirects to the activity_path(activity). That we have differnt kinds of activity is nothing that rails knows about.\n\nSo the current fix works because it creates an activity_path, but it would fall apart as soon as we have another commentable to which we want to redirect to within the root namespace.\nAnother possible solution would be to subclass the comments controller and have something like a StatusUpdates::CommentsController? This Controller then could live under /status_updates/comments and always redirect to a status update.\n\nKinda thinking out loud here, but does that sound reasonable?\n"}