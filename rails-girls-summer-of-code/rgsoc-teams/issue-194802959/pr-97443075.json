{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/571", "id": 97443075, "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/571", "diff_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/571.diff", "patch_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/571.patch", "issue_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/571", "number": 571, "state": "closed", "locked": false, "title": "User impersonation (development only)", "user": {"login": "pgaspar", "id": 31735, "avatar_url": "https://avatars1.githubusercontent.com/u/31735?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pgaspar", "html_url": "https://github.com/pgaspar", "followers_url": "https://api.github.com/users/pgaspar/followers", "following_url": "https://api.github.com/users/pgaspar/following{/other_user}", "gists_url": "https://api.github.com/users/pgaspar/gists{/gist_id}", "starred_url": "https://api.github.com/users/pgaspar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pgaspar/subscriptions", "organizations_url": "https://api.github.com/users/pgaspar/orgs", "repos_url": "https://api.github.com/users/pgaspar/repos", "events_url": "https://api.github.com/users/pgaspar/events{/privacy}", "received_events_url": "https://api.github.com/users/pgaspar/received_events", "type": "User", "site_admin": false}, "body": "This PR addresses and hopefully closes #548. It allows users to impersonate other users in development. This is useful for testing the entire application process as both team members.\r\n\r\n## How it looks & works\r\n\r\nIn the public-facing Community page (`users#index`), you'll see an orange button for every user in the list, except yourself.\r\n\r\n![impersonation](https://cloud.githubusercontent.com/assets/31735/21076964/dac45306-bf32-11e6-92ee-b6cacfe3b6a3.png)\r\n\r\nAs soon as you hover your mouse over one of these buttons, you get a [bootstrap popover](http://getbootstrap.com/javascript/#popovers) with a small explanation. (this may be a bit over the top \ud83d\ude05 let me know what you think).\r\n\r\n<img width=\"865\" alt=\"screen shot 2016-12-10 at 23 44 21\" src=\"https://cloud.githubusercontent.com/assets/31735/21077001/b17a6476-bf33-11e6-8222-dc397db18438.png\">\r\n\r\nIf you open a user's profile, you'll also see an orange \"Impersonate\" link. It also shows the same popover on hover.\r\n\r\n<img width=\"988\" alt=\"screen shot 2016-12-10 at 23 44 59\" src=\"https://cloud.githubusercontent.com/assets/31735/21076995/8730348e-bf33-11e6-89f4-6eba97c0b9df.png\">\r\n\r\nClicking any of these orange buttons will switch your `current_user` to be the impersonated user. I used a gem called [pretender](https://github.com/ankane/pretender) that also gives us a `true_user` method, which is the original user. This is how clicking the link looks like:\r\n\r\n<img width=\"1183\" alt=\"screen shot 2016-12-10 at 23 45 21\" src=\"https://cloud.githubusercontent.com/assets/31735/21077026/218918f2-bf34-11e6-9270-83afc1177dcc.png\">\r\n\r\nYou'll notice that when in \"impersonation mode\", the Sign out link is swapped by a \"Stop impersonation\" one.\r\n\r\n<img width=\"1164\" alt=\"screen shot 2016-12-10 at 21 19 40\" src=\"https://cloud.githubusercontent.com/assets/31735/21077033/546b67ac-bf34-11e6-9063-ee0b991a8a67.png\">\r\n\r\nClicking it will stop the impersonation make you _you_ again!\r\n\r\n## Some details\r\n\r\n### Keeping this out of production\r\n\r\nAs you'll see in the code, I'm checking for the production environment at the route level and at the view level. Let me know if you feel I should add some controller-level protection, like a guard clause which is what's being used on the Switch Season Phase feature.\r\n\r\n### Tests\r\n\r\nI wanted to explore testing the route-level production protections and I (eventually) got it working \ud83d\ude4c . At the end of it I had a feeling that this may be testing _too deeply_, so if I'm happy to remove/alter if you'd like.\r\n\r\n### The orange buttons & other visible changes\r\n\r\nI picked the `eye-open` and `eye-close` icons because it was the best I could find in the Font Awesome version we're using. Open to suggestions, but I'm not too worried since this is dev-only.\r\n\r\nThe Stop impersonation button isn't great - I wanted to make it \"Stop Impersonation\", but that would break the menu layout for supervisors (they have an extra link in the menu).\r\n\r\nThe popover that comes up when you hover the buttons may be a bit too much. I'm ok with removing it entirely if you want.\r\n\r\nOh, and the buttons are orange because the Switch Phase button (another development-only feature) was also orange \ud83d\ude04 ", "created_at": "2016-12-11T00:14:10Z", "updated_at": "2016-12-19T15:47:03Z", "closed_at": "2016-12-19T15:47:00Z", "merged_at": "2016-12-19T15:47:00Z", "merge_commit_sha": "0456ccec563f95165acbdf8146567f2167ef2084", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [], "milestone": null, "commits_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/571/commits", "review_comments_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/571/comments", "review_comment_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/571/comments", "statuses_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/statuses/f0c2a1b5b8adb9bc14f4f14b9851b276e647b233", "head": {"label": "pgaspar:feature/user-impersonation", "ref": "feature/user-impersonation", "sha": "f0c2a1b5b8adb9bc14f4f14b9851b276e647b233", "user": {"login": "pgaspar", "id": 31735, "avatar_url": "https://avatars1.githubusercontent.com/u/31735?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pgaspar", "html_url": "https://github.com/pgaspar", "followers_url": "https://api.github.com/users/pgaspar/followers", "following_url": "https://api.github.com/users/pgaspar/following{/other_user}", "gists_url": "https://api.github.com/users/pgaspar/gists{/gist_id}", "starred_url": "https://api.github.com/users/pgaspar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pgaspar/subscriptions", "organizations_url": "https://api.github.com/users/pgaspar/orgs", "repos_url": "https://api.github.com/users/pgaspar/repos", "events_url": "https://api.github.com/users/pgaspar/events{/privacy}", "received_events_url": "https://api.github.com/users/pgaspar/received_events", "type": "User", "site_admin": false}, "repo": {"id": 75779242, "name": "rgsoc-teams", "full_name": "pgaspar/rgsoc-teams", "owner": {"login": "pgaspar", "id": 31735, "avatar_url": "https://avatars1.githubusercontent.com/u/31735?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pgaspar", "html_url": "https://github.com/pgaspar", "followers_url": "https://api.github.com/users/pgaspar/followers", "following_url": "https://api.github.com/users/pgaspar/following{/other_user}", "gists_url": "https://api.github.com/users/pgaspar/gists{/gist_id}", "starred_url": "https://api.github.com/users/pgaspar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pgaspar/subscriptions", "organizations_url": "https://api.github.com/users/pgaspar/orgs", "repos_url": "https://api.github.com/users/pgaspar/repos", "events_url": "https://api.github.com/users/pgaspar/events{/privacy}", "received_events_url": "https://api.github.com/users/pgaspar/received_events", "type": "User", "site_admin": false}, "private": false, "html_url": "https://github.com/pgaspar/rgsoc-teams", "description": "Teams management and activity ", "fork": true, "url": "https://api.github.com/repos/pgaspar/rgsoc-teams", "forks_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/forks", "keys_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/teams", "hooks_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/hooks", "issue_events_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/issues/events{/number}", "events_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/events", "assignees_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/assignees{/user}", "branches_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/branches{/branch}", "tags_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/tags", "blobs_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/git/refs{/sha}", "trees_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/statuses/{sha}", "languages_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/languages", "stargazers_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/stargazers", "contributors_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/contributors", "subscribers_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/subscribers", "subscription_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/subscription", "commits_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/commits{/sha}", "git_commits_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/git/commits{/sha}", "comments_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/comments{/number}", "issue_comment_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/issues/comments{/number}", "contents_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/contents/{+path}", "compare_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/merges", "archive_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/downloads", "issues_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/issues{/number}", "pulls_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/pulls{/number}", "milestones_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/milestones{/number}", "notifications_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/labels{/name}", "releases_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/releases{/id}", "deployments_url": "https://api.github.com/repos/pgaspar/rgsoc-teams/deployments", "created_at": "2016-12-06T23:03:21Z", "updated_at": "2016-12-06T23:03:23Z", "pushed_at": "2016-12-19T15:47:03Z", "git_url": "git://github.com/pgaspar/rgsoc-teams.git", "ssh_url": "git@github.com:pgaspar/rgsoc-teams.git", "clone_url": "https://github.com/pgaspar/rgsoc-teams.git", "svn_url": "https://github.com/pgaspar/rgsoc-teams", "homepage": "https://teams.railsgirlssummerofcode.org", "size": 3835, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": null, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "rails-girls-summer-of-code:master", "ref": "master", "sha": "194c5c7101e7688b0bc884dc5d607c2ee10858cd", "user": {"login": "rails-girls-summer-of-code", "id": 4704447, "avatar_url": "https://avatars3.githubusercontent.com/u/4704447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rails-girls-summer-of-code", "html_url": "https://github.com/rails-girls-summer-of-code", "followers_url": "https://api.github.com/users/rails-girls-summer-of-code/followers", "following_url": "https://api.github.com/users/rails-girls-summer-of-code/following{/other_user}", "gists_url": "https://api.github.com/users/rails-girls-summer-of-code/gists{/gist_id}", "starred_url": "https://api.github.com/users/rails-girls-summer-of-code/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rails-girls-summer-of-code/subscriptions", "organizations_url": "https://api.github.com/users/rails-girls-summer-of-code/orgs", "repos_url": "https://api.github.com/users/rails-girls-summer-of-code/repos", "events_url": "https://api.github.com/users/rails-girls-summer-of-code/events{/privacy}", "received_events_url": "https://api.github.com/users/rails-girls-summer-of-code/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 10705327, "name": "rgsoc-teams", "full_name": "rails-girls-summer-of-code/rgsoc-teams", "owner": {"login": "rails-girls-summer-of-code", "id": 4704447, "avatar_url": "https://avatars3.githubusercontent.com/u/4704447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rails-girls-summer-of-code", "html_url": "https://github.com/rails-girls-summer-of-code", "followers_url": "https://api.github.com/users/rails-girls-summer-of-code/followers", "following_url": "https://api.github.com/users/rails-girls-summer-of-code/following{/other_user}", "gists_url": "https://api.github.com/users/rails-girls-summer-of-code/gists{/gist_id}", "starred_url": "https://api.github.com/users/rails-girls-summer-of-code/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rails-girls-summer-of-code/subscriptions", "organizations_url": "https://api.github.com/users/rails-girls-summer-of-code/orgs", "repos_url": "https://api.github.com/users/rails-girls-summer-of-code/repos", "events_url": "https://api.github.com/users/rails-girls-summer-of-code/events{/privacy}", "received_events_url": "https://api.github.com/users/rails-girls-summer-of-code/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams", "description": "Teams management and activity ", "fork": false, "url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams", "forks_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/forks", "keys_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/teams", "hooks_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/hooks", "issue_events_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/events{/number}", "events_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/events", "assignees_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/assignees{/user}", "branches_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/branches{/branch}", "tags_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/tags", "blobs_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/git/refs{/sha}", "trees_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/statuses/{sha}", "languages_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/languages", "stargazers_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/stargazers", "contributors_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/contributors", "subscribers_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/subscribers", "subscription_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/subscription", "commits_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/commits{/sha}", "git_commits_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/git/commits{/sha}", "comments_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/comments{/number}", "issue_comment_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/comments{/number}", "contents_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/contents/{+path}", "compare_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/merges", "archive_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/downloads", "issues_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues{/number}", "pulls_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls{/number}", "milestones_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/milestones{/number}", "notifications_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/labels{/name}", "releases_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/releases{/id}", "deployments_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/deployments", "created_at": "2013-06-15T11:13:22Z", "updated_at": "2018-02-28T15:56:26Z", "pushed_at": "2018-03-08T22:57:26Z", "git_url": "git://github.com/rails-girls-summer-of-code/rgsoc-teams.git", "ssh_url": "git@github.com:rails-girls-summer-of-code/rgsoc-teams.git", "clone_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams.git", "svn_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams", "homepage": "https://teams.railsgirlssummerofcode.org", "size": 7974, "stargazers_count": 47, "watchers_count": 47, "language": "Ruby", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 130, "mirror_url": null, "archived": false, "open_issues_count": 67, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 130, "open_issues": 67, "watchers": 47, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/571"}, "html": {"href": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/571"}, "issue": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/571"}, "comments": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/571/comments"}, "review_comments": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/571/comments"}, "review_comment": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/571/commits"}, "statuses": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/statuses/f0c2a1b5b8adb9bc14f4f14b9851b276e647b233"}}, "author_association": "COLLABORATOR", "body_html": "<p>This PR addresses and hopefully <span aria-label=\"This pull request closes issue #548.\" class=\"issue-keyword tooltipped tooltipped-se\">closes</span> <a href=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/issues/548\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"185963260\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/issues/548\">#548</a>. It allows users to impersonate other users in development. This is useful for testing the entire application process as both team members.</p>\n<h2>How it looks &amp; works</h2>\n<p>In the public-facing Community page (<code>users#index</code>), you'll see an orange button for every user in the list, except yourself.</p>\n<p><a href=\"https://cloud.githubusercontent.com/assets/31735/21076964/dac45306-bf32-11e6-92ee-b6cacfe3b6a3.png\" target=\"_blank\"><img src=\"https://cloud.githubusercontent.com/assets/31735/21076964/dac45306-bf32-11e6-92ee-b6cacfe3b6a3.png\" alt=\"impersonation\" style=\"max-width:100%;\"></a></p>\n<p>As soon as you hover your mouse over one of these buttons, you get a <a href=\"http://getbootstrap.com/javascript/#popovers\" rel=\"nofollow\">bootstrap popover</a> with a small explanation. (this may be a bit over the top <g-emoji class=\"g-emoji\" alias=\"sweat_smile\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f605.png\">\ud83d\ude05</g-emoji> let me know what you think).</p>\n<p><a href=\"https://cloud.githubusercontent.com/assets/31735/21077001/b17a6476-bf33-11e6-8222-dc397db18438.png\" target=\"_blank\"><img width=\"865\" alt=\"screen shot 2016-12-10 at 23 44 21\" src=\"https://cloud.githubusercontent.com/assets/31735/21077001/b17a6476-bf33-11e6-8222-dc397db18438.png\" style=\"max-width:100%;\"></a></p>\n<p>If you open a user's profile, you'll also see an orange \"Impersonate\" link. It also shows the same popover on hover.</p>\n<p><a href=\"https://cloud.githubusercontent.com/assets/31735/21076995/8730348e-bf33-11e6-89f4-6eba97c0b9df.png\" target=\"_blank\"><img width=\"988\" alt=\"screen shot 2016-12-10 at 23 44 59\" src=\"https://cloud.githubusercontent.com/assets/31735/21076995/8730348e-bf33-11e6-89f4-6eba97c0b9df.png\" style=\"max-width:100%;\"></a></p>\n<p>Clicking any of these orange buttons will switch your <code>current_user</code> to be the impersonated user. I used a gem called <a href=\"https://github.com/ankane/pretender\">pretender</a> that also gives us a <code>true_user</code> method, which is the original user. This is how clicking the link looks like:</p>\n<p><a href=\"https://cloud.githubusercontent.com/assets/31735/21077026/218918f2-bf34-11e6-9270-83afc1177dcc.png\" target=\"_blank\"><img width=\"1183\" alt=\"screen shot 2016-12-10 at 23 45 21\" src=\"https://cloud.githubusercontent.com/assets/31735/21077026/218918f2-bf34-11e6-9270-83afc1177dcc.png\" style=\"max-width:100%;\"></a></p>\n<p>You'll notice that when in \"impersonation mode\", the Sign out link is swapped by a \"Stop impersonation\" one.</p>\n<p><a href=\"https://cloud.githubusercontent.com/assets/31735/21077033/546b67ac-bf34-11e6-9063-ee0b991a8a67.png\" target=\"_blank\"><img width=\"1164\" alt=\"screen shot 2016-12-10 at 21 19 40\" src=\"https://cloud.githubusercontent.com/assets/31735/21077033/546b67ac-bf34-11e6-9063-ee0b991a8a67.png\" style=\"max-width:100%;\"></a></p>\n<p>Clicking it will stop the impersonation make you <em>you</em> again!</p>\n<h2>Some details</h2>\n<h3>Keeping this out of production</h3>\n<p>As you'll see in the code, I'm checking for the production environment at the route level and at the view level. Let me know if you feel I should add some controller-level protection, like a guard clause which is what's being used on the Switch Season Phase feature.</p>\n<h3>Tests</h3>\n<p>I wanted to explore testing the route-level production protections and I (eventually) got it working <g-emoji class=\"g-emoji\" alias=\"raised_hands\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f64c.png\">\ud83d\ude4c</g-emoji> . At the end of it I had a feeling that this may be testing <em>too deeply</em>, so if I'm happy to remove/alter if you'd like.</p>\n<h3>The orange buttons &amp; other visible changes</h3>\n<p>I picked the <code>eye-open</code> and <code>eye-close</code> icons because it was the best I could find in the Font Awesome version we're using. Open to suggestions, but I'm not too worried since this is dev-only.</p>\n<p>The Stop impersonation button isn't great - I wanted to make it \"Stop Impersonation\", but that would break the menu layout for supervisors (they have an extra link in the menu).</p>\n<p>The popover that comes up when you hover the buttons may be a bit too much. I'm ok with removing it entirely if you want.</p>\n<p>Oh, and the buttons are orange because the Switch Phase button (another development-only feature) was also orange <g-emoji class=\"g-emoji\" alias=\"smile\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f604.png\">\ud83d\ude04</g-emoji></p>", "body_text": "This PR addresses and hopefully closes #548. It allows users to impersonate other users in development. This is useful for testing the entire application process as both team members.\nHow it looks & works\nIn the public-facing Community page (users#index), you'll see an orange button for every user in the list, except yourself.\n\nAs soon as you hover your mouse over one of these buttons, you get a bootstrap popover with a small explanation. (this may be a bit over the top \ud83d\ude05 let me know what you think).\n\nIf you open a user's profile, you'll also see an orange \"Impersonate\" link. It also shows the same popover on hover.\n\nClicking any of these orange buttons will switch your current_user to be the impersonated user. I used a gem called pretender that also gives us a true_user method, which is the original user. This is how clicking the link looks like:\n\nYou'll notice that when in \"impersonation mode\", the Sign out link is swapped by a \"Stop impersonation\" one.\n\nClicking it will stop the impersonation make you you again!\nSome details\nKeeping this out of production\nAs you'll see in the code, I'm checking for the production environment at the route level and at the view level. Let me know if you feel I should add some controller-level protection, like a guard clause which is what's being used on the Switch Season Phase feature.\nTests\nI wanted to explore testing the route-level production protections and I (eventually) got it working \ud83d\ude4c . At the end of it I had a feeling that this may be testing too deeply, so if I'm happy to remove/alter if you'd like.\nThe orange buttons & other visible changes\nI picked the eye-open and eye-close icons because it was the best I could find in the Font Awesome version we're using. Open to suggestions, but I'm not too worried since this is dev-only.\nThe Stop impersonation button isn't great - I wanted to make it \"Stop Impersonation\", but that would break the menu layout for supervisors (they have an extra link in the menu).\nThe popover that comes up when you hover the buttons may be a bit too much. I'm ok with removing it entirely if you want.\nOh, and the buttons are orange because the Switch Phase button (another development-only feature) was also orange \ud83d\ude04", "merged": true, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": {"login": "pgaspar", "id": 31735, "avatar_url": "https://avatars1.githubusercontent.com/u/31735?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pgaspar", "html_url": "https://github.com/pgaspar", "followers_url": "https://api.github.com/users/pgaspar/followers", "following_url": "https://api.github.com/users/pgaspar/following{/other_user}", "gists_url": "https://api.github.com/users/pgaspar/gists{/gist_id}", "starred_url": "https://api.github.com/users/pgaspar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pgaspar/subscriptions", "organizations_url": "https://api.github.com/users/pgaspar/orgs", "repos_url": "https://api.github.com/users/pgaspar/repos", "events_url": "https://api.github.com/users/pgaspar/events{/privacy}", "received_events_url": "https://api.github.com/users/pgaspar/received_events", "type": "User", "site_admin": false}, "comments": 9, "review_comments": 7, "maintainer_can_modify": false, "commits": 10, "additions": 169, "deletions": 8, "changed_files": 14}