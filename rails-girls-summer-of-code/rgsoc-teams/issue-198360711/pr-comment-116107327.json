{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments/116107327", "pull_request_review_id": 37702315, "id": 116107327, "diff_hunk": "@@ -45,23 +45,13 @@ def destroy\n   end\n \n   # # switch_phase: enables developers to easily switch between time dependent settings in views\n-  # by opening and closing the corresponding links in the nav bar\n+  # by showing the corresponding links in the nav bar\n   def switch_phase\n     return if Rails.env.production?\n-      case params[:option]\n-      when 'Proposals'\n-        Season::PhaseSwitcher.fake_proposals_phase\n-      when 'Application'\n-        Season::PhaseSwitcher.fake_application_phase\n-      when 'CodingSummer'\n-        Season::PhaseSwitcher.fake_coding_phase\n-      when 'RealTime'\n-        Season::PhaseSwitcher.back_to_reality\n-      end\n-    redirect_to orga_seasons_path, notice: \"We time travelled into the #{params[:option]} phase\"\n+    Season::PhaseSwitcher.destined(params[:phase])", "path": "app/controllers/orga/seasons_controller.rb", "position": null, "original_position": 19, "commit_id": "4c120f41f14b541cf49d9fc05bb70c5382c8ba91", "original_commit_id": "6053436616a8e6257c1e0d6427b29a845dd18e40", "user": {"login": "klappradla", "id": 3491815, "avatar_url": "https://avatars3.githubusercontent.com/u/3491815?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klappradla", "html_url": "https://github.com/klappradla", "followers_url": "https://api.github.com/users/klappradla/followers", "following_url": "https://api.github.com/users/klappradla/following{/other_user}", "gists_url": "https://api.github.com/users/klappradla/gists{/gist_id}", "starred_url": "https://api.github.com/users/klappradla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klappradla/subscriptions", "organizations_url": "https://api.github.com/users/klappradla/orgs", "repos_url": "https://api.github.com/users/klappradla/repos", "events_url": "https://api.github.com/users/klappradla/events{/privacy}", "received_events_url": "https://api.github.com/users/klappradla/received_events", "type": "User", "site_admin": false}, "body": "I'm not 100% sure, but doesn't the `phase` end up in the `params` as `string` **always**? So depending on your contract with `PhaseSwitcher` I'd suggest to do the necessary conversion **before** passing it on to the business logic. Could e.g. look like this:\r\n\r\n```ruby\r\ndef switch_phase\r\n  # ...\r\n  Season::PhaseSwitcher.destined(phase)\r\nend\r\n\r\nprivate\r\n\r\ndef phase\r\n  params[:phase].to_sym\r\nend\r\n```", "created_at": "2017-05-11T21:30:35Z", "updated_at": "2017-05-14T21:21:53Z", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/585#discussion_r116107327", "pull_request_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/585", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments/116107327"}, "html": {"href": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/585#discussion_r116107327"}, "pull_request": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/585"}}, "body_html": "<p>I'm not 100% sure, but doesn't the <code>phase</code> end up in the <code>params</code> as <code>string</code> <strong>always</strong>? So depending on your contract with <code>PhaseSwitcher</code> I'd suggest to do the necessary conversion <strong>before</strong> passing it on to the business logic. Could e.g. look like this:</p>\n<div class=\"highlight highlight-source-ruby\"><pre><span class=\"pl-k\">def</span> <span class=\"pl-en\">switch_phase</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> ...</span>\n  <span class=\"pl-c1\">Season</span>::<span class=\"pl-c1\">PhaseSwitcher</span>.destined(phase)\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">private</span>\n\n<span class=\"pl-k\">def</span> <span class=\"pl-en\">phase</span>\n  params[<span class=\"pl-c1\">:phase</span>].to_sym\n<span class=\"pl-k\">end</span></pre></div>", "body_text": "I'm not 100% sure, but doesn't the phase end up in the params as string always? So depending on your contract with PhaseSwitcher I'd suggest to do the necessary conversion before passing it on to the business logic. Could e.g. look like this:\ndef switch_phase\n  # ...\n  Season::PhaseSwitcher.destined(phase)\nend\n\nprivate\n\ndef phase\n  params[:phase].to_sym\nend"}