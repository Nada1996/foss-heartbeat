{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/684", "repository_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams", "labels_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/684/labels{/name}", "comments_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/684/comments", "events_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/684/events", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/684", "id": 211374787, "number": 684, "title": "sets permissions to see the email address in the user profile", "user": {"login": "mkalininait", "id": 1745735, "avatar_url": "https://avatars2.githubusercontent.com/u/1745735?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mkalininait", "html_url": "https://github.com/mkalininait", "followers_url": "https://api.github.com/users/mkalininait/followers", "following_url": "https://api.github.com/users/mkalininait/following{/other_user}", "gists_url": "https://api.github.com/users/mkalininait/gists{/gist_id}", "starred_url": "https://api.github.com/users/mkalininait/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mkalininait/subscriptions", "organizations_url": "https://api.github.com/users/mkalininait/orgs", "repos_url": "https://api.github.com/users/mkalininait/repos", "events_url": "https://api.github.com/users/mkalininait/events{/privacy}", "received_events_url": "https://api.github.com/users/mkalininait/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-03-02T12:17:55Z", "updated_at": "2017-04-04T22:03:23Z", "closed_at": "2017-04-04T21:47:14Z", "author_association": "OWNER", "pull_request": {"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/684", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/684", "diff_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/684.diff", "patch_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/684.patch"}, "body_html": "<p>This PR should fix this bug: <a href=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/issues/647#issuecomment-278918784\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"206166055\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/issues/647\">#647 (comment)</a></p>\n<p>I didn't write the tests yet, because I don't know how to do it yet, and then I got sick. I decided to make this PR in case someone wants to add the tests and release the bugfix. Otherwise I'll add them to this PR after I recover.</p>\n<p>Here is the logic of permissions for the tests:</p>\n<p><strong>email address is hidden:</strong></p>\n<ul>\n<li>allow: admin, user's supervisor in current season (must be also a confirmed user)</li>\n<li>disallow: not admin, not user's supervisor in current season</li>\n</ul>\n<p><strong>email address is not hidden:</strong></p>\n<ul>\n<li>allow: admin, confirmed user, user him/herself*</li>\n<li>disallow: not admin, not confirmed user, not user him/herself</li>\n</ul>\n<p><em>* A user sees his/her email address only if it's not hidden, because it looks like a good UX for me: a user can change the \"Hide email\" option and see the changes on his/her profile.</em></p>\n<p><a href=\"https://github.com/carpodaster\" class=\"user-mention\">@carpodaster</a> I was not sure if I should add something to the users controller <code>/app/controllers/users_controller.rb</code> It works without adding anything there, too :)</p>", "body_text": "This PR should fix this bug: #647 (comment)\nI didn't write the tests yet, because I don't know how to do it yet, and then I got sick. I decided to make this PR in case someone wants to add the tests and release the bugfix. Otherwise I'll add them to this PR after I recover.\nHere is the logic of permissions for the tests:\nemail address is hidden:\n\nallow: admin, user's supervisor in current season (must be also a confirmed user)\ndisallow: not admin, not user's supervisor in current season\n\nemail address is not hidden:\n\nallow: admin, confirmed user, user him/herself*\ndisallow: not admin, not confirmed user, not user him/herself\n\n* A user sees his/her email address only if it's not hidden, because it looks like a good UX for me: a user can change the \"Hide email\" option and see the changes on his/her profile.\n@carpodaster I was not sure if I should add something to the users controller /app/controllers/users_controller.rb It works without adding anything there, too :)", "body": "This PR should fix this bug: https://github.com/rails-girls-summer-of-code/rgsoc-teams/issues/647#issuecomment-278918784\r\n\r\nI didn't write the tests yet, because I don't know how to do it yet, and then I got sick. I decided to make this PR in case someone wants to add the tests and release the bugfix. Otherwise I'll add them to this PR after I recover.\r\n\r\nHere is the logic of permissions for the tests:\r\n\r\n**email address is hidden:**\r\n * allow: admin, user's supervisor in current season (must be also a confirmed user)\r\n * disallow: not admin, not user's supervisor in current season\r\n\r\n**email address is not hidden:**\r\n * allow: admin, confirmed user, user him/herself*\r\n * disallow: not admin, not confirmed user, not user him/herself\r\n\r\n_\\* A user sees his/her email address only if it's not hidden, because it looks like a good UX for me: a user can change the \"Hide email\" option and see the changes on his/her profile._\r\n\r\n@carpodaster I was not sure if I should add something to the users controller `/app/controllers/users_controller.rb` It works without adding anything there, too :)"}