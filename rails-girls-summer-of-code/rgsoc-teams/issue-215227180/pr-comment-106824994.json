{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments/106824994", "pull_request_review_id": 27764838, "id": 106824994, "diff_hunk": "@@ -126,40 +126,47 @@\n \n   describe 'PUT signoff' do\n     context 'as a project_maintainer of this season' do\n-      let!(:project) { create(:project, :in_current_season, :accepted, submitter: user) }\n+      let!(:project)   { create(:project, :in_current_season, :accepted, submitter: user) }\n \n       before { sign_in user }\n \n       context 'for an application that they are a mentor of' do\n-        let(:application) { create(:application, :in_current_season, :for_project, project1: project) }\n+        let(:application)   { create(:application, :in_current_season, :for_project, project1: project) }\n+        let(:m_application) { Mentor::Application.new(id: application.id, choice: 1) }\n \n-        it 'sets the sign-off timestamp' do\n-          expect { put :signoff, params: { id: application.id } }\n-            .to change { application.reload.signed_off_at }.from nil\n+        subject { put :signoff, params: { id: application.id } }\n+\n+        it 'sets the sign-off timestamp for the project choice' do\n+          expect { subject }\n+            .to change { application.reload.application_data['signed_off_at_project1'] }\n+            .from nil\n         end\n \n-        it 'set persists the mentor who signed-off' do\n-          expect { put :signoff, params: { id: application.id } }\n-            .to change { application.reload.signatory }.to user\n+        it 'set persists the mentor id who signed-off' do", "path": "spec/controllers/mentor/applications_controller_spec.rb", "position": null, "original_position": 28, "commit_id": "fee3ed2fe5604f2e8490d6fce6056956db44c670", "original_commit_id": "7d6cb352fb54bc1241b2a1ef788d9bba840f10ee", "user": {"login": "pgaspar", "id": 31735, "avatar_url": "https://avatars1.githubusercontent.com/u/31735?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pgaspar", "html_url": "https://github.com/pgaspar", "followers_url": "https://api.github.com/users/pgaspar/followers", "following_url": "https://api.github.com/users/pgaspar/following{/other_user}", "gists_url": "https://api.github.com/users/pgaspar/gists{/gist_id}", "starred_url": "https://api.github.com/users/pgaspar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pgaspar/subscriptions", "organizations_url": "https://api.github.com/users/pgaspar/orgs", "repos_url": "https://api.github.com/users/pgaspar/repos", "events_url": "https://api.github.com/users/pgaspar/events{/privacy}", "received_events_url": "https://api.github.com/users/pgaspar/received_events", "type": "User", "site_admin": false}, "body": "Extra \"set\" here, I think.", "created_at": "2017-03-20T00:53:10Z", "updated_at": "2017-03-20T14:39:12Z", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/699#discussion_r106824994", "pull_request_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/699", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments/106824994"}, "html": {"href": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/699#discussion_r106824994"}, "pull_request": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/699"}}, "body_html": "<p>Extra \"set\" here, I think.</p>", "body_text": "Extra \"set\" here, I think."}