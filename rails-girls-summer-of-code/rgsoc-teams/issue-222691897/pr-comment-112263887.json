{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments/112263887", "pull_request_review_id": 33565125, "id": 112263887, "diff_hunk": "@@ -8,14 +8,20 @@ class CommentsController < ApplicationController\n   PATH_PARENTS = []\n \n   def create\n-    comment = Comment.new(comment_params)\n+    @comment = Comment.new(comment_params)\n \n-    if (comment.text.present? && comment.save)\n-      anchor = ActionView::RecordIdentifier.dom_id(comment)\n+    if (@comment.text.present? && @comment.save)\n+      anchor = ActionView::RecordIdentifier.dom_id(@comment)\n     else\n       flash[:alert] = \"Oh no! We can't save your comment. Please try again?\"\n     end\n-    redirect_to commentable_path(comment.commentable, anchor || nil)\n+\n+    @new_comment = self.class::PATH_PARENTS + [Comment.new(commentable: @comment.commentable)]\n+\n+    respond_to do |format|\n+      format.html { redirect_to commentable_path(@comment.commentable, anchor || nil) }", "path": "app/controllers/comments_controller.rb", "position": 19, "original_position": 19, "commit_id": "0acb889c03d54146c7c525b10cdcab985df8aee8", "original_commit_id": "468100ab410be6086e8f0b527960a941e39387c9", "user": {"login": "klappradla", "id": 3491815, "avatar_url": "https://avatars3.githubusercontent.com/u/3491815?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klappradla", "html_url": "https://github.com/klappradla", "followers_url": "https://api.github.com/users/klappradla/followers", "following_url": "https://api.github.com/users/klappradla/following{/other_user}", "gists_url": "https://api.github.com/users/klappradla/gists{/gist_id}", "starred_url": "https://api.github.com/users/klappradla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klappradla/subscriptions", "organizations_url": "https://api.github.com/users/klappradla/orgs", "repos_url": "https://api.github.com/users/klappradla/repos", "events_url": "https://api.github.com/users/klappradla/events{/privacy}", "received_events_url": "https://api.github.com/users/klappradla/received_events", "type": "User", "site_admin": false}, "body": "Is there still a non `remote true` form somewhere? If not, one could get rid about the `format.html` as well as everything related to `anchor` and `flash` since this won't be used for the ajax request anyways.", "created_at": "2017-04-19T17:24:23Z", "updated_at": "2017-04-22T10:37:28Z", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/742#discussion_r112263887", "pull_request_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/742", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments/112263887"}, "html": {"href": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/742#discussion_r112263887"}, "pull_request": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/742"}}, "body_html": "<p>Is there still a non <code>remote true</code> form somewhere? If not, one could get rid about the <code>format.html</code> as well as everything related to <code>anchor</code> and <code>flash</code> since this won't be used for the ajax request anyways.</p>", "body_text": "Is there still a non remote true form somewhere? If not, one could get rid about the format.html as well as everything related to anchor and flash since this won't be used for the ajax request anyways."}