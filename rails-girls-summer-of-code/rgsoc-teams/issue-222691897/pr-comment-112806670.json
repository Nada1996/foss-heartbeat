{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments/112806670", "pull_request_review_id": 34154306, "id": 112806670, "diff_hunk": "@@ -8,14 +8,20 @@ class CommentsController < ApplicationController\n   PATH_PARENTS = []\n \n   def create\n-    comment = Comment.new(comment_params)\n+    @comment = Comment.new(comment_params)\n \n-    if (comment.text.present? && comment.save)\n-      anchor = ActionView::RecordIdentifier.dom_id(comment)\n+    if (@comment.text.present? && @comment.save)\n+      anchor = ActionView::RecordIdentifier.dom_id(@comment)\n     else\n       flash[:alert] = \"Oh no! We can't save your comment. Please try again?\"\n     end\n-    redirect_to commentable_path(comment.commentable, anchor || nil)\n+\n+    @new_comment = self.class::PATH_PARENTS + [Comment.new(commentable: @comment.commentable)]\n+\n+    respond_to do |format|\n+      format.html { redirect_to commentable_path(@comment.commentable, anchor || nil) }", "path": "app/controllers/comments_controller.rb", "position": 19, "original_position": 19, "commit_id": "0acb889c03d54146c7c525b10cdcab985df8aee8", "original_commit_id": "468100ab410be6086e8f0b527960a941e39387c9", "user": {"login": "michaelem", "id": 182228, "avatar_url": "https://avatars3.githubusercontent.com/u/182228?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelem", "html_url": "https://github.com/michaelem", "followers_url": "https://api.github.com/users/michaelem/followers", "following_url": "https://api.github.com/users/michaelem/following{/other_user}", "gists_url": "https://api.github.com/users/michaelem/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelem/subscriptions", "organizations_url": "https://api.github.com/users/michaelem/orgs", "repos_url": "https://api.github.com/users/michaelem/repos", "events_url": "https://api.github.com/users/michaelem/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelem/received_events", "type": "User", "site_admin": false}, "body": "Yes, the CommentsController is used all over the app, fore example projects are comment-able:\r\nhttps://github.com/rails-girls-summer-of-code/rgsoc-teams/blob/master/app/views/projects/show.html.slim#L81\r\n\r\nThe following models seem support comments:\r\n- Application\r\n- Activity\r\n- Project\r\n- Team\r\n", "created_at": "2017-04-22T10:00:45Z", "updated_at": "2017-04-22T10:37:28Z", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/742#discussion_r112806670", "pull_request_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/742", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments/112806670"}, "html": {"href": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/742#discussion_r112806670"}, "pull_request": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/742"}}, "body_html": "<p>Yes, the CommentsController is used all over the app, fore example projects are comment-able:<br>\n<a href=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/blob/master/app/views/projects/show.html.slim#L81\">https://github.com/rails-girls-summer-of-code/rgsoc-teams/blob/master/app/views/projects/show.html.slim#L81</a></p>\n<p>The following models seem support comments:</p>\n<ul>\n<li>Application</li>\n<li>Activity</li>\n<li>Project</li>\n<li>Team</li>\n</ul>", "body_text": "Yes, the CommentsController is used all over the app, fore example projects are comment-able:\nhttps://github.com/rails-girls-summer-of-code/rgsoc-teams/blob/master/app/views/projects/show.html.slim#L81\nThe following models seem support comments:\n\nApplication\nActivity\nProject\nTeam", "in_reply_to_id": 112263887}