{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/comments/314251606", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/783#issuecomment-314251606", "issue_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/783", "id": 314251606, "user": {"login": "klappradla", "id": 3491815, "avatar_url": "https://avatars3.githubusercontent.com/u/3491815?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klappradla", "html_url": "https://github.com/klappradla", "followers_url": "https://api.github.com/users/klappradla/followers", "following_url": "https://api.github.com/users/klappradla/following{/other_user}", "gists_url": "https://api.github.com/users/klappradla/gists{/gist_id}", "starred_url": "https://api.github.com/users/klappradla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klappradla/subscriptions", "organizations_url": "https://api.github.com/users/klappradla/orgs", "repos_url": "https://api.github.com/users/klappradla/repos", "events_url": "https://api.github.com/users/klappradla/events{/privacy}", "received_events_url": "https://api.github.com/users/klappradla/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-10T21:25:09Z", "updated_at": "2017-07-10T21:25:09Z", "author_association": "MEMBER", "body_html": "<p>Just for quick notice <a href=\"https://github.com/f3pix\" class=\"user-mention\">@F3PiX</a> : I had a look at production data</p>\n<div class=\"highlight highlight-source-ruby\"><pre><span class=\"pl-c1\">Application</span>.pluck(<span class=\"pl-c1\">:project_id</span>)</pre></div>\n<p>returns only <code>nil</code>, so the query you had in mind won't work.</p>\n<p>The <code>team</code> references its project - but sadly only by name (<code>project_name</code>) <g-emoji class=\"g-emoji\" alias=\"disappointed\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f61e.png\">\ud83d\ude1e</g-emoji></p>\n<p>But afaik this should be set for all teams that got accepted and got a project assigned.</p>\n<p>So this query for instance would give you all projects that are worked on right now:</p>\n<div class=\"highlight highlight-source-ruby\"><pre>project_names <span class=\"pl-k\">=</span> <span class=\"pl-c1\">Team</span>\n  .in_current_season\n  .accepted\n  .pluck(<span class=\"pl-c1\">:project_name</span>)\n\n<span class=\"pl-c1\">Project</span>\n  .in_current_season\n  .where(<span class=\"pl-c1\">name:</span> project_names)</pre></div>\n<p>Based on the <code>project_name</code> as the only association between Team and Project one could even build up an association <g-emoji class=\"g-emoji\" alias=\"see_no_evil\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f648.png\">\ud83d\ude48</g-emoji> Looks something along the lines of this as far as I remember (absolutely no guarantee):</p>\n<div class=\"highlight highlight-source-ruby\"><pre><span class=\"pl-c\"><span class=\"pl-c\">#</span> in team</span>\nhas_one <span class=\"pl-c1\">:project</span>, <span class=\"pl-c1\">foreign_key:</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>name<span class=\"pl-pds\">'</span></span>, <span class=\"pl-c1\">primary_key:</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>project_name<span class=\"pl-pds\">'</span></span></pre></div>", "body_text": "Just for quick notice @F3PiX : I had a look at production data\nApplication.pluck(:project_id)\nreturns only nil, so the query you had in mind won't work.\nThe team references its project - but sadly only by name (project_name) \ud83d\ude1e\nBut afaik this should be set for all teams that got accepted and got a project assigned.\nSo this query for instance would give you all projects that are worked on right now:\nproject_names = Team\n  .in_current_season\n  .accepted\n  .pluck(:project_name)\n\nProject\n  .in_current_season\n  .where(name: project_names)\nBased on the project_name as the only association between Team and Project one could even build up an association \ud83d\ude48 Looks something along the lines of this as far as I remember (absolutely no guarantee):\n# in team\nhas_one :project, foreign_key: 'name', primary_key: 'project_name'", "body": "Just for quick notice @F3PiX : I had a look at production data\r\n```ruby\r\nApplication.pluck(:project_id)\r\n```\r\nreturns only `nil`, so the query you had in mind won't work. \r\n\r\nThe `team` references its project - but sadly only by name (`project_name`) \ud83d\ude1e \r\n\r\nBut afaik this should be set for all teams that got accepted and got a project assigned.\r\n\r\nSo this query for instance would give you all projects that are worked on right now:\r\n```ruby\r\nproject_names = Team\r\n  .in_current_season\r\n  .accepted\r\n  .pluck(:project_name)\r\n\r\nProject\r\n  .in_current_season\r\n  .where(name: project_names)\r\n```\r\n\r\nBased on the `project_name` as the only association between Team and Project one could even build up an association \ud83d\ude48 Looks something along the lines of this as far as I remember (absolutely no guarantee):\r\n```ruby\r\n# in team\r\nhas_one :project, foreign_key: 'name', primary_key: 'project_name'\r\n```"}