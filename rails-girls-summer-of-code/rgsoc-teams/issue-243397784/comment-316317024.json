{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/comments/316317024", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/793#issuecomment-316317024", "issue_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/793", "id": 316317024, "user": {"login": "F3PiX", "id": 6314687, "avatar_url": "https://avatars1.githubusercontent.com/u/6314687?v=4", "gravatar_id": "", "url": "https://api.github.com/users/F3PiX", "html_url": "https://github.com/F3PiX", "followers_url": "https://api.github.com/users/F3PiX/followers", "following_url": "https://api.github.com/users/F3PiX/following{/other_user}", "gists_url": "https://api.github.com/users/F3PiX/gists{/gist_id}", "starred_url": "https://api.github.com/users/F3PiX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/F3PiX/subscriptions", "organizations_url": "https://api.github.com/users/F3PiX/orgs", "repos_url": "https://api.github.com/users/F3PiX/repos", "events_url": "https://api.github.com/users/F3PiX/events{/privacy}", "received_events_url": "https://api.github.com/users/F3PiX/received_events", "type": "User", "site_admin": false}, "created_at": "2017-07-19T08:48:26Z", "updated_at": "2017-07-19T08:48:26Z", "author_association": "MEMBER", "body_html": "<p>Thanks Max for your review! Much appreciated.</p>\n<p>Three issues:</p>\n<ol>\n<li>\n<p>partials (<a href=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/793#discussion_r127827825\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"243397784\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/issues/793\">#793 (comment)</a>)<br>\nThe <code>_table</code> and <code>_details</code> partials are shared partials, by the <code>orga/mailings_controller</code> and the public <code>mailings_controller</code>. I'd prefer to leave them as partials, and not duplicate the code. Okay?</p>\n</li>\n<li>\n<p>tests<br>\nI still don't understand all of the code. I added some basic specs, and I left comments inside the code <g-emoji class=\"g-emoji\" alias=\"scream\" fallback-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f631.png\">\ud83d\ude31</g-emoji> , to explain my problems (to prevent GH noise with explanations).<br>\nThe main logic is from before ActiveJob, and <a href=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/commit/71cb736d9f84dfd967ce099821d48bac62916590#diff-8b04dfc748ae7c73f82a96d00a3db3c2\">at one point</a>, a <code>Worker</code> was replaced with a Mailer.<br>\nEither there is some duplication, or I don't fully understand it. In both cases, it doesn't help to find the right specs to write.<br>\nOf course, I will remove the comments in the next commit.<br>\nI'd like to know if I am going in the right direction with the specs.</p>\n</li>\n<li>\n<p>About the redirection and the routing([your comment])(<a href=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/793#discussion_r127829287\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"243397784\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/issues/793\">#793 (comment)</a>) : Instead of the complicated and confusing redirection, I just restored cancancan's <code>load_and_authorize_resource</code>. In order to get that to show a 'non authorised' notice (instead of <code>action not found</code>), the routes has to be present in the <code>routes</code> without constraints, and empty declarations in the controller.<br>\n(For the empty declarations: I tend to add only new and edit.)</p>\n</li>\n</ol>\n<p><a href=\"https://github.com/klappradla\" class=\"user-mention\">@klappradla</a> Before doing a code review, maybe first answer to this issues? Then I'll update accordingly.</p>", "body_text": "Thanks Max for your review! Much appreciated.\nThree issues:\n\n\npartials (#793 (comment))\nThe _table and _details partials are shared partials, by the orga/mailings_controller and the public mailings_controller. I'd prefer to leave them as partials, and not duplicate the code. Okay?\n\n\ntests\nI still don't understand all of the code. I added some basic specs, and I left comments inside the code \ud83d\ude31 , to explain my problems (to prevent GH noise with explanations).\nThe main logic is from before ActiveJob, and at one point, a Worker was replaced with a Mailer.\nEither there is some duplication, or I don't fully understand it. In both cases, it doesn't help to find the right specs to write.\nOf course, I will remove the comments in the next commit.\nI'd like to know if I am going in the right direction with the specs.\n\n\nAbout the redirection and the routing([your comment])(#793 (comment)) : Instead of the complicated and confusing redirection, I just restored cancancan's load_and_authorize_resource. In order to get that to show a 'non authorised' notice (instead of action not found), the routes has to be present in the routes without constraints, and empty declarations in the controller.\n(For the empty declarations: I tend to add only new and edit.)\n\n\n@klappradla Before doing a code review, maybe first answer to this issues? Then I'll update accordingly.", "body": "Thanks Max for your review! Much appreciated.\r\n\r\nThree issues:\r\n1) partials (https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/793#discussion_r127827825)\r\nThe `_table` and `_details` partials are shared partials, by the `orga/mailings_controller` and the public `mailings_controller`. I'd prefer to leave them as partials, and not duplicate the code. Okay? \r\n\r\n2) tests\r\nI still don't understand all of the code. I added some basic specs, and I left comments inside the code \ud83d\ude31 , to explain my problems (to prevent GH noise with explanations). \r\nThe main logic is from before ActiveJob, and [at one point](https://github.com/rails-girls-summer-of-code/rgsoc-teams/commit/71cb736d9f84dfd967ce099821d48bac62916590#diff-8b04dfc748ae7c73f82a96d00a3db3c2), a `Worker` was replaced with a Mailer.\r\nEither there is some duplication, or I don't fully understand it. In both cases, it doesn't help to find the right specs to write.    \r\nOf course, I will remove the comments in the next commit. \r\nI'd like to know if I am going in the right direction with the specs.\r\n\r\n3) About the redirection and the routing([your comment])(https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/793#discussion_r127829287) : Instead of the complicated and confusing redirection, I just restored cancancan's `load_and_authorize_resource`. In order to get that to show a 'non authorised' notice (instead of `action not found`), the routes has to be present in the `routes` without constraints, and empty declarations in the controller. \r\n(For the empty declarations: I tend to add only new and edit.) \r\n\r\n  \r\n@klappradla Before doing a code review, maybe first answer to this issues? Then I'll update accordingly.\r\n"}