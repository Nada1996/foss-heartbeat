{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/comments/321572858", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/812#issuecomment-321572858", "issue_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/812", "id": 321572858, "user": {"login": "mkalininait", "id": 1745735, "avatar_url": "https://avatars2.githubusercontent.com/u/1745735?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mkalininait", "html_url": "https://github.com/mkalininait", "followers_url": "https://api.github.com/users/mkalininait/followers", "following_url": "https://api.github.com/users/mkalininait/following{/other_user}", "gists_url": "https://api.github.com/users/mkalininait/gists{/gist_id}", "starred_url": "https://api.github.com/users/mkalininait/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mkalininait/subscriptions", "organizations_url": "https://api.github.com/users/mkalininait/orgs", "repos_url": "https://api.github.com/users/mkalininait/repos", "events_url": "https://api.github.com/users/mkalininait/events{/privacy}", "received_events_url": "https://api.github.com/users/mkalininait/received_events", "type": "User", "site_admin": false}, "created_at": "2017-08-10T14:44:26Z", "updated_at": "2017-08-10T14:44:26Z", "author_association": "OWNER", "body_html": "<p>Hey <a href=\"https://github.com/klappradla\" class=\"user-mention\">@klappradla</a> This PR is supposed to fix two things:</p>\n<ol>\n<li>Rename the NONE option to NONE <a href=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/issues/806\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"246471372\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/issues/806\">#806</a></li>\n<li>Fix validation of the terms <a href=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/810#issuecomment-321212774\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"247207222\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/issues/810\">#810 (comment)</a></li>\n</ol>\n<p><a href=\"https://github.com/juuh42dias\" class=\"user-mention\">@juuh42dias</a></p>\n<ol>\n<li>looks good to me!</li>\n<li>works partially. Unfortunately the validation works only when we create a preference (which we can see from the code as well: <code>validates :terms_checked?, acceptance: true, on: :create</code>). If I uncheck a term checkbox after a preference has been created and save the form, the app still saves 'true'.</li>\n</ol>\n<p>The whole term validation feature looks simple to me:</p>\n<ul>\n<li>If at least one preference is selected, we check if the terms are checked when we save the form:\n<ul>\n<li>If the terms are not checked, we show an error message.</li>\n<li>If the terms are checked, we save the changes.</li>\n</ul>\n</li>\n<li>If both preferences are not selected (set to 'None'), we don't check the terms at all.</li>\n</ul>\n<p>Do you think we can make it work this way? <a href=\"https://github.com/juuh42dias\" class=\"user-mention\">@juuh42dias</a> <a href=\"https://github.com/klappradla\" class=\"user-mention\">@klappradla</a></p>", "body_text": "Hey @klappradla This PR is supposed to fix two things:\n\nRename the NONE option to NONE #806\nFix validation of the terms #810 (comment)\n\n@juuh42dias\n\nlooks good to me!\nworks partially. Unfortunately the validation works only when we create a preference (which we can see from the code as well: validates :terms_checked?, acceptance: true, on: :create). If I uncheck a term checkbox after a preference has been created and save the form, the app still saves 'true'.\n\nThe whole term validation feature looks simple to me:\n\nIf at least one preference is selected, we check if the terms are checked when we save the form:\n\nIf the terms are not checked, we show an error message.\nIf the terms are checked, we save the changes.\n\n\nIf both preferences are not selected (set to 'None'), we don't check the terms at all.\n\nDo you think we can make it work this way? @juuh42dias @klappradla", "body": "Hey @klappradla This PR is supposed to fix two things:\r\n1) Rename the NONE option to NONE https://github.com/rails-girls-summer-of-code/rgsoc-teams/issues/806\r\n2) Fix validation of the terms https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/810#issuecomment-321212774\r\n\r\n@juuh42dias \r\n1) looks good to me!\r\n2) works partially. Unfortunately the validation works only when we create a preference (which we can see from the code as well: `validates :terms_checked?, acceptance: true, on: :create`). If I uncheck a term checkbox after a preference has been created and save the form, the app still saves 'true'.\r\n\r\nThe whole term validation feature looks simple to me:\r\n- If at least one preference is selected, we check if the terms are checked when we save the form:\r\n  - If the terms are not checked, we show an error message.\r\n  - If the terms are checked, we save the changes.\r\n- If both preferences are not selected (set to 'None'), we don't check the terms at all.\r\n\r\nDo you think we can make it work this way? @juuh42dias @klappradla "}