{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments/136183909", "pull_request_review_id": 59684454, "id": 136183909, "diff_hunk": "@@ -0,0 +1,102 @@\n+require 'spec_helper'\n+\n+describe ConferencePreference do\n+  it { is_expected.to belong_to(:team) }\n+  it { is_expected.to belong_to(:first_conference) }\n+  it { is_expected.to belong_to(:second_conference) }\n+\n+  describe 'validates terms of ticket and terms of travel' do\n+    let(:preference_without_terms) { build(:conference_preference) }\n+    let(:preference_with_terms) { build(:conference_preference, :with_terms_checked)}\n+\n+    context 'when both terms are not checked' do\n+      it 'do not save conference preferences' do\n+        expect(preference_without_terms).not_to be_valid\n+      end\n+    end\n+\n+    context 'when terms of travel are not checked' do\n+      before { preference_without_terms.terms_of_ticket = true}\n+\n+      it 'do not save conference preferences' do\n+        expect(preference_without_terms).not_to be_valid\n+      end\n+    end\n+\n+    context 'when terms of ticket are not checked' do\n+      before { preference_without_terms.terms_of_travel = true}\n+\n+      it 'do not save conference preferences' do\n+        expect(preference_without_terms).not_to be_valid\n+      end\n+    end\n+\n+    context 'when both terms are checked' do\n+      it 'saves conference preferences if terms of ticket and terms of travel was checked' do\n+        expect(preference_with_terms).to be_valid\n+      end\n+    end\n+  end\n+\n+  describe '.current teams' do\n+    let(:team) { FactoryGirl.create(:team, :in_current_season, :with_preferences) }\n+    let(:old_team) { FactoryGirl.create(:team, :with_preferences) }\n+\n+    it 'returns just conference preference from current teams' do\n+      current_teams = ConferencePreference.current_teams\n+      expect(current_teams).to contain_exactly(team.conference_preference)\n+    end\n+  end\n+\n+  describe '#terms accepted?' do\n+    let(:conference_preference_with_terms) { FactoryGirl.build(:conference_preference, :with_terms_checked) }\n+    let(:conference_preference_without_terms) { FactoryGirl.build(:conference_preference) }\n+\n+    context 'when conference preference terms are accepted' do\n+      it 'returns true' do\n+        expect(conference_preference_with_terms.terms_accepted?).to eql true\n+      end\n+    end\n+\n+    context 'when conference preference terms are not accepted' do\n+      it 'returns false' do\n+        expect(conference_preference_without_terms.terms_accepted?).to eql false\n+      end\n+    end\n+  end\n+\n+\n+  describe '#has_preference?' do\n+    let(:conference_preference) { FactoryGirl.build(:conference_preference, :with_terms_checked)}\n+\n+    context 'when conference preference has neither first or second choice set' do\n+      before { conference_preference.first_conference_id = nil, conference_preference.second_conference_id = nil }", "path": "spec/models/conference_preference_spec.rb", "position": null, "original_position": 73, "commit_id": "fc40b25f34eec25da65da59052beee19b9df0a24", "original_commit_id": "7ce4d21ea39b87ce56d08d1475ccf55ab7b958a6", "user": {"login": "carpodaster", "id": 164400, "avatar_url": "https://avatars2.githubusercontent.com/u/164400?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carpodaster", "html_url": "https://github.com/carpodaster", "followers_url": "https://api.github.com/users/carpodaster/followers", "following_url": "https://api.github.com/users/carpodaster/following{/other_user}", "gists_url": "https://api.github.com/users/carpodaster/gists{/gist_id}", "starred_url": "https://api.github.com/users/carpodaster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carpodaster/subscriptions", "organizations_url": "https://api.github.com/users/carpodaster/orgs", "repos_url": "https://api.github.com/users/carpodaster/repos", "events_url": "https://api.github.com/users/carpodaster/events{/privacy}", "received_events_url": "https://api.github.com/users/carpodaster/received_events", "type": "User", "site_admin": false}, "body": "I think the comma should be a `;`.\r\n\r\nBetter to use a multi-line `do \u2026 end` before block here", "created_at": "2017-08-30T20:43:31Z", "updated_at": "2017-08-31T13:56:27Z", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/839#discussion_r136183909", "pull_request_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/839", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments/136183909"}, "html": {"href": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/839#discussion_r136183909"}, "pull_request": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/839"}}, "body_html": "<p>I think the comma should be a <code>;</code>.</p>\n<p>Better to use a multi-line <code>do \u2026 end</code> before block here</p>", "body_text": "I think the comma should be a ;.\nBetter to use a multi-line do \u2026 end before block here"}