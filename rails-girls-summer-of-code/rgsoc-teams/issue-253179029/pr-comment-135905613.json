{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments/135905613", "pull_request_review_id": 59373950, "id": 135905613, "diff_hunk": "@@ -0,0 +1,18 @@\n+require 'spec_helper'\n+\n+RSpec.describe OrderedConferences do\n+  render_views\n+\n+  describe '#index' do\n+    let!(:dummy_class) { Class.new { extend OrderedConferences } }", "path": "spec/controllers/concerns/ordered_conferences_spec.rb", "position": null, "original_position": 7, "commit_id": "beee3e72cae02cc48b70ef354fa9e5af7174bdbd", "original_commit_id": "4d093881b83369623f6a65e4334d51e8e4655d37", "user": {"login": "carpodaster", "id": 164400, "avatar_url": "https://avatars2.githubusercontent.com/u/164400?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carpodaster", "html_url": "https://github.com/carpodaster", "followers_url": "https://api.github.com/users/carpodaster/followers", "following_url": "https://api.github.com/users/carpodaster/following{/other_user}", "gists_url": "https://api.github.com/users/carpodaster/gists{/gist_id}", "starred_url": "https://api.github.com/users/carpodaster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carpodaster/subscriptions", "organizations_url": "https://api.github.com/users/carpodaster/orgs", "repos_url": "https://api.github.com/users/carpodaster/repos", "events_url": "https://api.github.com/users/carpodaster/events{/privacy}", "received_events_url": "https://api.github.com/users/carpodaster/received_events", "type": "User", "site_admin": false}, "body": "The anonymous class you're defining doesn't have a `params` method, that's why you're getting the error. Further down you're checking for `@conferences` but that would reference an instance variable of the _test class_.\r\n\r\nDoes this code work? (only written here on GH, haven't run it anywhere)\r\n\r\n```ruby\r\nsubject { dummy_class.new.index }\r\n\r\nlet!(:dummy_class) do\r\n  Class.new do\r\n    include OrderedConferences\r\n    def params; {} end\r\n    attr_reader :conferences # exposes the @conferences ivar\r\n  end\r\nend\r\n\r\n# other let variables\r\n\r\nit 'returns an ordered list of conferences' do\r\n  expect(subject).to eq [conference_africa, conference_europe, conference_na]\r\nend\r\n```", "created_at": "2017-08-29T20:40:52Z", "updated_at": "2017-08-29T22:17:09Z", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/842#discussion_r135905613", "pull_request_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/842", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments/135905613"}, "html": {"href": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/842#discussion_r135905613"}, "pull_request": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/842"}}, "body_html": "<p>The anonymous class you're defining doesn't have a <code>params</code> method, that's why you're getting the error. Further down you're checking for <code>@conferences</code> but that would reference an instance variable of the <em>test class</em>.</p>\n<p>Does this code work? (only written here on GH, haven't run it anywhere)</p>\n<div class=\"highlight highlight-source-ruby\"><pre>subject { dummy_class.<span class=\"pl-k\">new</span>.index }\n\nlet!(<span class=\"pl-c1\">:dummy_class</span>) <span class=\"pl-k\">do</span>\n  <span class=\"pl-c1\">Class</span>.<span class=\"pl-k\">new</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-k\">include</span> <span class=\"pl-c1\">OrderedConferences</span>\n    <span class=\"pl-k\">def</span> <span class=\"pl-en\">params</span>; {} <span class=\"pl-k\">end</span>\n    <span class=\"pl-k\">attr_reader</span> <span class=\"pl-c1\">:conferences</span> <span class=\"pl-c\"><span class=\"pl-c\">#</span> exposes the @conferences ivar</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> other let variables</span>\n\nit <span class=\"pl-s\"><span class=\"pl-pds\">'</span>returns an ordered list of conferences<span class=\"pl-pds\">'</span></span> <span class=\"pl-k\">do</span>\n  expect(subject).to eq [conference_africa, conference_europe, conference_na]\n<span class=\"pl-k\">end</span></pre></div>", "body_text": "The anonymous class you're defining doesn't have a params method, that's why you're getting the error. Further down you're checking for @conferences but that would reference an instance variable of the test class.\nDoes this code work? (only written here on GH, haven't run it anywhere)\nsubject { dummy_class.new.index }\n\nlet!(:dummy_class) do\n  Class.new do\n    include OrderedConferences\n    def params; {} end\n    attr_reader :conferences # exposes the @conferences ivar\n  end\nend\n\n# other let variables\n\nit 'returns an ordered list of conferences' do\n  expect(subject).to eq [conference_africa, conference_europe, conference_na]\nend"}