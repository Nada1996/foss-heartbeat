{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/859", "repository_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams", "labels_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/859/labels{/name}", "comments_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/859/comments", "events_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/859/events", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/859", "id": 258618298, "number": 859, "title": "Fix flaky controller spec", "user": {"login": "klappradla", "id": 3491815, "avatar_url": "https://avatars3.githubusercontent.com/u/3491815?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klappradla", "html_url": "https://github.com/klappradla", "followers_url": "https://api.github.com/users/klappradla/followers", "following_url": "https://api.github.com/users/klappradla/following{/other_user}", "gists_url": "https://api.github.com/users/klappradla/gists{/gist_id}", "starred_url": "https://api.github.com/users/klappradla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klappradla/subscriptions", "organizations_url": "https://api.github.com/users/klappradla/orgs", "repos_url": "https://api.github.com/users/klappradla/repos", "events_url": "https://api.github.com/users/klappradla/events{/privacy}", "received_events_url": "https://api.github.com/users/klappradla/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-18T20:55:19Z", "updated_at": "2017-11-11T09:06:15Z", "closed_at": "2017-09-19T17:07:15Z", "author_association": "MEMBER", "pull_request": {"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/859", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/859", "diff_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/859.diff", "patch_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/859.patch"}, "body_html": "<p>This attempts to fix (and while that not slow down the test suite...) a test that at least for me frequently failed on CI. It was basically hardcoding an ID which did not always work out right.</p>\n<p>I switched it to use RSpec's <code>assigns</code> to get the assigned object from within the controller. Doing something like</p>\n<div class=\"highlight highlight-source-ruby\"><pre>comment <span class=\"pl-k\">=</span> <span class=\"pl-c1\">Comment</span>.last</pre></div>\n<p>would have been another option, but I thought we could spare another hit to the DB for this example.</p>", "body_text": "This attempts to fix (and while that not slow down the test suite...) a test that at least for me frequently failed on CI. It was basically hardcoding an ID which did not always work out right.\nI switched it to use RSpec's assigns to get the assigned object from within the controller. Doing something like\ncomment = Comment.last\nwould have been another option, but I thought we could spare another hit to the DB for this example.", "body": "This attempts to fix (and while that not slow down the test suite...) a test that at least for me frequently failed on CI. It was basically hardcoding an ID which did not always work out right.\r\n\r\nI switched it to use RSpec's `assigns` to get the assigned object from within the controller. Doing something like\r\n```ruby\r\ncomment = Comment.last\r\n```\r\nwould have been another option, but I thought we could spare another hit to the DB for this example."}