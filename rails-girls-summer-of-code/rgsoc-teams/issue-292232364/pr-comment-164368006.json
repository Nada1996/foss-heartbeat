{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments/164368006", "pull_request_review_id": 92127932, "id": 164368006, "diff_hunk": "@@ -63,7 +63,7 @@ def apply\n     if current_team.coaches_confirmed?\n       if application_draft.ready? && application_draft.submit_application!\n         flash[:notice] = 'Your application has been submitted!'\n-        ApplicationFormMailer.new_application(application_draft.application).deliver_later\n+        application_draft.application.notify_orga_and_submitters", "path": "app/controllers/application_drafts_controller.rb", "position": 5, "original_position": 5, "commit_id": "929f27afa972f460cfd36b8594325560ee2e8c5f", "original_commit_id": "e34a0c56688522fa6047e90e0a77bcaa8c78674d", "user": {"login": "carpodaster", "id": 164400, "avatar_url": "https://avatars2.githubusercontent.com/u/164400?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carpodaster", "html_url": "https://github.com/carpodaster", "followers_url": "https://api.github.com/users/carpodaster/followers", "following_url": "https://api.github.com/users/carpodaster/following{/other_user}", "gists_url": "https://api.github.com/users/carpodaster/gists{/gist_id}", "starred_url": "https://api.github.com/users/carpodaster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carpodaster/subscriptions", "organizations_url": "https://api.github.com/users/carpodaster/orgs", "repos_url": "https://api.github.com/users/carpodaster/repos", "events_url": "https://api.github.com/users/carpodaster/events{/privacy}", "received_events_url": "https://api.github.com/users/carpodaster/received_events", "type": "User", "site_admin": false}, "body": "(ugh, for some reason that comment didn't make it into my review \u2013 PEBCAC for sure)\r\n\r\nPersonal taste: I tend to `!` methods with IO/network side effects. Then again, I also like it that the method doesn't say that the type of notification is an email. /shrug :) \r\n\r\nOne other thing, though: can we move this notification into the state transition? The method call on `application` looked a bit suspicious (Mrs Demeter called) and that got me thinking that it's probably not the controller's responsibility", "created_at": "2018-01-29T09:07:32Z", "updated_at": "2018-01-29T17:59:29Z", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/917#discussion_r164368006", "pull_request_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/917", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments/164368006"}, "html": {"href": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/917#discussion_r164368006"}, "pull_request": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/917"}}, "body_html": "<p>(ugh, for some reason that comment didn't make it into my review \u2013 PEBCAC for sure)</p>\n<p>Personal taste: I tend to <code>!</code> methods with IO/network side effects. Then again, I also like it that the method doesn't say that the type of notification is an email. /shrug :)</p>\n<p>One other thing, though: can we move this notification into the state transition? The method call on <code>application</code> looked a bit suspicious (Mrs Demeter called) and that got me thinking that it's probably not the controller's responsibility</p>", "body_text": "(ugh, for some reason that comment didn't make it into my review \u2013 PEBCAC for sure)\nPersonal taste: I tend to ! methods with IO/network side effects. Then again, I also like it that the method doesn't say that the type of notification is an email. /shrug :)\nOne other thing, though: can we move this notification into the state transition? The method call on application looked a bit suspicious (Mrs Demeter called) and that got me thinking that it's probably not the controller's responsibility"}