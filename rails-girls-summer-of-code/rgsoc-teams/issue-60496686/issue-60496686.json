{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/160", "repository_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams", "labels_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/160/labels{/name}", "comments_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/160/comments", "events_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/issues/160/events", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/160", "id": 60496686, "number": 160, "title": "Upgrade to rails 4.2", "user": {"login": "marcgreenstock", "id": 287739, "avatar_url": "https://avatars2.githubusercontent.com/u/287739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marcgreenstock", "html_url": "https://github.com/marcgreenstock", "followers_url": "https://api.github.com/users/marcgreenstock/followers", "following_url": "https://api.github.com/users/marcgreenstock/following{/other_user}", "gists_url": "https://api.github.com/users/marcgreenstock/gists{/gist_id}", "starred_url": "https://api.github.com/users/marcgreenstock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marcgreenstock/subscriptions", "organizations_url": "https://api.github.com/users/marcgreenstock/orgs", "repos_url": "https://api.github.com/users/marcgreenstock/repos", "events_url": "https://api.github.com/users/marcgreenstock/events{/privacy}", "received_events_url": "https://api.github.com/users/marcgreenstock/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2015-03-10T13:10:34Z", "updated_at": "2015-05-26T19:38:20Z", "closed_at": "2015-05-26T19:38:20Z", "author_association": "MEMBER", "pull_request": {"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/160", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/160", "diff_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/160.diff", "patch_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/160.patch"}, "body_html": "<p>Seeing as though I left a mess with the mail monkey patch I decided to try and upgrade to Rails 4.2.</p>\n<p>This resolves <a href=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/issues/139\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load issue title\" data-id=\"59098348\" data-permission-text=\"Issue title is private\" data-url=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/issues/139\">#139</a>.</p>\n<p>A few notes on what is done:</p>\n<ol>\n<li>Rails upgraded to 4.2</li>\n<li>cancan has been replaced by <a href=\"https://github.com/CanCanCommunity/cancancan\">cancancan</a></li>\n<li>All gems have been updated with the exception of <a href=\"https://github.com/aws/aws-sdk-ruby\">aws-sdk</a>, changes to the aws-sdk are significant, see the <a href=\"https://github.com/aws/aws-sdk-ruby/blob/master/UPGRADING.md\">upgrading nodes</a>. This is perhaps justification for a separate issue.</li>\n<li>There were a number of deprecation warnings that have been solved, <del>there are still a few more left though</del>.</li>\n<li>I have converted all mailers to use <code>deliver_later</code>, ActiveJob style. In doing so I have deleted all the workers.</li>\n</ol>\n<p>I had a problem with this <a href=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/commit/56207cd8d6ef37a7368194c7f8990f50476a343d\" class=\"commit-link\"><tt>56207cd</tt></a> see the commit description, I am not sure this is tested correctly.</p>\n<p>Also in <a href=\"https://github.com/rails-girls-summer-of-code/rgsoc-teams/blob/71cb736d9f84dfd967ce099821d48bac62916590/spec/controllers/comments_controller_spec.rb\">comments_controller_spec.rb</a>. I changed the spec to not test for the delivery, but for the enqueueing of the job. I'll run the coverage shortly to ensure the mailer is tested correctly.</p>\n<p>I also noticed two pending tests: <code>ApplicationsController as an authenticated user POST create creates a new application</code> and <code>ApplicationsController as an authenticated user POST create fails to create invalid record</code> make a lot of noise, but don't fail the tests.</p>\n<p><a href=\"https://camo.githubusercontent.com/67da7a25b95c6f32809b584ac5e2eb36f9551bde/687474703a2f2f692e696d6775722e636f6d2f754f716b4f70432e676966\" target=\"_blank\"><img src=\"https://camo.githubusercontent.com/67da7a25b95c6f32809b584ac5e2eb36f9551bde/687474703a2f2f692e696d6775722e636f6d2f754f716b4f70432e676966\" alt=\"make it stop\" data-canonical-src=\"http://i.imgur.com/uOqkOpC.gif\" style=\"max-width:100%;\"></a></p>\n<p>Enjoy!</p>", "body_text": "Seeing as though I left a mess with the mail monkey patch I decided to try and upgrade to Rails 4.2.\nThis resolves #139.\nA few notes on what is done:\n\nRails upgraded to 4.2\ncancan has been replaced by cancancan\nAll gems have been updated with the exception of aws-sdk, changes to the aws-sdk are significant, see the upgrading nodes. This is perhaps justification for a separate issue.\nThere were a number of deprecation warnings that have been solved, there are still a few more left though.\nI have converted all mailers to use deliver_later, ActiveJob style. In doing so I have deleted all the workers.\n\nI had a problem with this 56207cd see the commit description, I am not sure this is tested correctly.\nAlso in comments_controller_spec.rb. I changed the spec to not test for the delivery, but for the enqueueing of the job. I'll run the coverage shortly to ensure the mailer is tested correctly.\nI also noticed two pending tests: ApplicationsController as an authenticated user POST create creates a new application and ApplicationsController as an authenticated user POST create fails to create invalid record make a lot of noise, but don't fail the tests.\n\nEnjoy!", "body": "Seeing as though I left a mess with the mail monkey patch I decided to try and upgrade to Rails 4.2.\n\nThis resolves https://github.com/rails-girls-summer-of-code/rgsoc-teams/issues/139.\n\nA few notes on what is done:\n1. Rails upgraded to 4.2\n2. cancan has been replaced by [cancancan](https://github.com/CanCanCommunity/cancancan)\n3. All gems have been updated with the exception of [aws-sdk](https://github.com/aws/aws-sdk-ruby), changes to the aws-sdk are significant, see the [upgrading nodes](https://github.com/aws/aws-sdk-ruby/blob/master/UPGRADING.md). This is perhaps justification for a separate issue.\n4. There were a number of deprecation warnings that have been solved, ~~there are still a few more left though~~.\n5. I have converted all mailers to use `deliver_later`, ActiveJob style. In doing so I have deleted all the workers.\n\nI had a problem with this https://github.com/rails-girls-summer-of-code/rgsoc-teams/commit/56207cd8d6ef37a7368194c7f8990f50476a343d see the commit description, I am not sure this is tested correctly.\n\nAlso in [comments_controller_spec.rb](https://github.com/rails-girls-summer-of-code/rgsoc-teams/blob/71cb736d9f84dfd967ce099821d48bac62916590/spec/controllers/comments_controller_spec.rb). I changed the spec to not test for the delivery, but for the enqueueing of the job. I'll run the coverage shortly to ensure the mailer is tested correctly.\n\nI also noticed two pending tests: `ApplicationsController as an authenticated user POST create creates a new application` and `ApplicationsController as an authenticated user POST create fails to create invalid record` make a lot of noise, but don't fail the tests.\n\n![make it stop](http://i.imgur.com/uOqkOpC.gif)\n\nEnjoy!\n"}