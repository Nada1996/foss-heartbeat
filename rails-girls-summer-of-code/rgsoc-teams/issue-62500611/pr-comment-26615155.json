{"url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments/26615155", "pull_request_review_id": null, "id": 26615155, "diff_hunk": "@@ -37,17 +57,48 @@\n \n       end\n \n-      context 'with two students' do\n+      Student::REQUIRED_DRAFT_FIELDS.each do |attribute|\n+        let(:ace_student)     { double.as_null_object }\n+        let(:value)           { SecureRandom.hex(12) }\n+\n         before do\n-          allow(subject).to receive(:students).and_return([failing_student])\n+          allow(ace_student).to receive(attribute).and_return(value)\n         end\n \n-        context 'one being invalid' do\n-          skip\n+        context 'with two students' do\n+          context 'one being invalid' do\n+            before do\n+              allow(subject).to receive(:students).and_return([failing_student, ace_student])\n+            end\n+\n+            it \"is satisfied when the corresponding student #{attribute} is set\" do\n+              expect { subject.valid? :apply }.not_to \\\n+                change { subject.errors[\"student1_#{attribute}\"] }\n+            end\n+\n+            it \"requires student0_#{attribute} for 'apply' context\" do\n+              expect { subject.valid? :apply }.to \\\n+                change { subject.errors[\"student0_#{attribute}\"] }.to include \"can't be blank\"\n+            end\n+\n+          end\n         end\n \n         context 'both being valid' do\n-          skip\n+          let(:ace_student_2)   { double.as_null_object }\n+          let(:value_2)         { SecureRandom.hex(12)  }\n+\n+          before do\n+            allow(subject).to receive(:students).and_return([ace_student, ace_student_2])", "path": "spec/models/application_draft_spec.rb", "position": null, "original_position": 68, "commit_id": "e021dadeb3cf0606d55f170a7b11e84b4a3c908f", "original_commit_id": "b25356733b735dff21e03d52f0dde8c277d6558f", "user": {"login": "carpodaster", "id": 164400, "avatar_url": "https://avatars2.githubusercontent.com/u/164400?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carpodaster", "html_url": "https://github.com/carpodaster", "followers_url": "https://api.github.com/users/carpodaster/followers", "following_url": "https://api.github.com/users/carpodaster/following{/other_user}", "gists_url": "https://api.github.com/users/carpodaster/gists{/gist_id}", "starred_url": "https://api.github.com/users/carpodaster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carpodaster/subscriptions", "organizations_url": "https://api.github.com/users/carpodaster/orgs", "repos_url": "https://api.github.com/users/carpodaster/repos", "events_url": "https://api.github.com/users/carpodaster/events{/privacy}", "received_events_url": "https://api.github.com/users/carpodaster/received_events", "type": "User", "site_admin": false}, "body": "You should be able to re-use the `ace_student` from up above as we don't have a mechanism in place that would check for the students not being the same reference. If it works w/o, lines 88-90 can be removed as well.\n", "created_at": "2015-03-17T20:55:04Z", "updated_at": "2015-03-17T21:03:09Z", "html_url": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/167#discussion_r26615155", "pull_request_url": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/167", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/comments/26615155"}, "html": {"href": "https://github.com/rails-girls-summer-of-code/rgsoc-teams/pull/167#discussion_r26615155"}, "pull_request": {"href": "https://api.github.com/repos/rails-girls-summer-of-code/rgsoc-teams/pulls/167"}}, "body_html": "<p>You should be able to re-use the <code>ace_student</code> from up above as we don't have a mechanism in place that would check for the students not being the same reference. If it works w/o, lines 88-90 can be removed as well.</p>", "body_text": "You should be able to re-use the ace_student from up above as we don't have a mechanism in place that would check for the students not being the same reference. If it works w/o, lines 88-90 can be removed as well."}